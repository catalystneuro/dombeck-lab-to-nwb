Ophys:
  FiberPhotometry:
    FiberPhotometryResponseSeries:
      - name: FiberPhotometryResponseSeriesGreen
        description: Green fluorescence collected during 470 nm illumination re-binned to 100 Hz
        indicator: GCaMP6f
        optical_fiber: chGreen
        excitation_source: ExcitationSource470
        photodetector: PhotodetectorPMT
        dichroic_mirror: DichroicMirror
        excitation_filter: OpticalFilter470
      - name: FiberPhotometryResponseSeriesIsosbestic
        description: Green fluorescence collected at its isosbestic wavelength (405 nm) re-binned to 100 Hz
        indicator: GCaMP6f
        optical_fiber: chGreen
        excitation_source: ExcitationSource405
        photodetector: PhotodetectorPMT
        dichroic_mirror: DichroicMirror
        excitation_filter: OpticalFilter405
      - name: FiberPhotometryResponseSeriesRed
        description: Red fluorescence collected during 470 nm illumination re-binned to 100 Hz
        indicator: mCherry
        optical_fiber: chRed
        excitation_source: ExcitationSource470
        photodetector: PhotodetectorPMT
        dichroic_mirror: DichroicMirror
        excitation_filter: OpticalFilter470
      - name: FiberPhotometryResponseSeriesRedIsosbestic
        description: Red fluorescence collected during 405 nm illumination re-binned to 100 Hz
        indicator: mCherry
        optical_fiber: chRed
        excitation_source: ExcitationSource405
        photodetector: PhotodetectorPMT
        dichroic_mirror: DichroicMirror
        excitation_filter: OpticalFilter405
    DfOverF:
      FiberPhotometryResponseSeries:
        - name: DfOverFFiberPhotometryResponseSeriesGreen
          description: DF/F from green fluorescence traces collected during 470 nm illumination.
          fiber_photometry_table_region: [0]
        - name: DfOverFFiberPhotometryResponseSeriesGreenIsosbestic
          description: DF/F from green fluorescence traces collected at its isosbestic wavelength (405 nm).
          fiber_photometry_table_region: [1]
        - name: DfOverFFiberPhotometryResponseSeriesRed
          description: DF/F from red fluorescence traces collected during 470 nm illumination.
          fiber_photometry_table_region: [2]
        - name: DfOverFFiberPhotometryResponseSeriesRedIsosbestic
          fiber_photometry_table_region: [3]
    OpticalFibers:
      - name: chGreen  # the name of the fiber in the .mat file
        description: The optical fiber used to record the GCaMP fluorescence.
        manufacturer: Doric
        model: MFP_200/230/900-0.57_1.5m_FC-FLT_LAF
        numerical_aperture: 0.57
      - name: chRed # the name of the fiber in the .mat file
        description: The optical fiber used to record the red fluorescence.
        manufacturer: Doric
        model: MFP_200/230/900-0.57_1.5m_FC-FLT_LAF
        numerical_aperture: 0.57
    ExcitationSources:
      - name: ExcitationSource470
        description: |
         Blue excitation light (470 nm LED, Thorlabs, M70F3) and violet excitation light (for the isosbestic control)
         were coupled into the optic fiber such that a power of 0.75 mW was delivered to the fiber tip.
         Then, 470 nm and 405 nm excitation were alternated at 100 Hz using a waveform generator,
         each filtered with a corresponding filter.
        manufacturer: Thorlabs
        model: M70F3
        excitation_wavelength_in_nm: 470.0
        illumination_type: LED
      - name: ExcitationSource405
        description: Violet LED (405 nm, Thorlabs, M405FP1) for the isosbestic control.
        manufacturer: Thorlabs
        model: M405FP1
        excitation_wavelength_in_nm: 405.0
        illumination_type: LED
    Photodetectors:
      - name: PhotodetectorPMT
        description: Hamamatsu GaAsP photomultiplier tube (signal amplified using Stanford Research Systems SR570 preamplifier).
        manufacturer: Hamamatsu Photonics
        model: H10770PA-40
        detector_type: PMT
        detected_wavelength_in_nm: 470.0 # TODO: check this
    OpticalFilters:
      - name: OpticalFilter405
        description: The filter used to isolate the 405 nm excitation light.
        manufacturer: Semrock
        model: FF01-406/15-25
        peak_wavelength_in_nm: 406.0
        bandwidth_in_nm: 15.0
        filter_type: Excitation  # TODO: not sure where to find the emission filter parameters (see: https://www.protocols.io/view/acute-striatal-or-midbrain-fiber-photometry-in-hea-4r3l27yj4g1y/v1?step=29)
      - name: OpticalFilter470
        description: The filter used to isolate the 470 nm excitation light.
        manufacturer: Semrock
        model: FF02-472/30-25
        peak_wavelength_in_nm: 472.0
        bandwidth_in_nm: 30.0
        filter_type: Excitation
#      - name: OpticalFilter525
#        description: The filter used to further filter the green fluorescence after it was separated from the excitation light by a dichroic mirror.
#        manufacturer: Semrock
#        model: FF01-540/50-25
#        peak_wavelength_in_nm: 540.0
#        bandwidth_in_nm: 50.0
#        filter_type: Bandpass
    DichroicMirrors:
      - name: DichroicMirror
        description: The dichroic mirror used to separate green fluorescence from the excitation light.
        manufacturer: Chroma Technology
        model: T505lpxr
        # cut_on_wavelength_in_nm: 465.0 TODO: have to ask for this
        # cut_off_wavelength_in_nm: 500.0 TODO: have to ask for this
    Indicator:
      - name: GCaMP6f
        label: AAV-GCaMP6f
        injection_location: SNc
        injection_coordinates_in_mm: [-3.25, 1.55, -3.8]
      - name: mCherry
        label: AAV5-EF1Î±-DIO-mCherry
        injection_location: SNc
        injection_coordinates_in_mm: [1.45, -3.15, -3.1]
